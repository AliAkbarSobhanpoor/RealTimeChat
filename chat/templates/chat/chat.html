{% extends "layouts/blank.html" %}
{% block content %}
  <wrapper class="block max-w-6xl mx-auto my-10 px-6">
  <div class="flex h-[45rem] bg-gray-900 rounded-2xl shadow-2xl overflow-hidden">
    <!-- Left Sidebar -->
    <aside class="w-64 bg-gray-850 text-gray-300 flex flex-col border-r border-gray-700">
      <div class="p-4 border-b border-gray-700">
        <h2 class="text-lg font-semibold text-white">Channels</h2>
      </div>
      <div class="flex-1 overflow-y-auto px-2 py-3">
        <!-- Text Channels -->
        <div class="mb-4">
          <h3 class="text-xs text-gray-400 uppercase mb-2">Text Channels</h3>
          <ul class="space-y-1">
            <li>
              <button class="w-full text-left px-3 py-2 rounded-md hover:bg-gray-700 transition"># general</button>
            </li>
            <li>
              <button class="w-full text-left px-3 py-2 rounded-md hover:bg-gray-700 transition"># development</button>
            </li>
            <li>
              <button class="w-full text-left px-3 py-2 rounded-md hover:bg-gray-700 transition"># random</button>
            </li>
          </ul>
        </div>
        <!-- Voice Channels -->
        <div>
          <h3 class="text-xs text-gray-400 uppercase mb-2">Voice Channels</h3>
          <ul class="space-y-1">
            <li>
              <button class="flex items-center justify-between w-full px-3 py-2 rounded-md hover:bg-gray-700 transition group"
                      id="join-voice-1">
                <span>ðŸ”Š Chill Zone</span>
                <span class="hidden group-hover:inline text-sm text-emerald-400">Join</span>
              </button>
            </li>
            <li>
              <button class="flex items-center justify-between w-full px-3 py-2 rounded-md hover:bg-gray-700 transition group"
                      id="join-voice-2">
                <span>ðŸŽ§ Coding</span>
                <span class="hidden group-hover:inline text-sm text-emerald-400">Join</span>
              </button>
            </li>
          </ul>
        </div>
      </div>
      <!-- Bottom User Info -->
      <div class="border-t border-gray-700 p-3 flex items-center gap-3">
        <img src="https://cdn-icons-png.flaticon.com/512/219/219969.png"
             class="w-8 h-8 rounded-full">
        <div class="flex-1">
          <p class="text-sm text-white">You</p>
          <p class="text-xs text-gray-400">Online</p>
        </div>
      </div>
    </aside>
    <!-- Main Chat Window -->
    <div id="chat_window"
         class="flex-1 flex flex-col bg-gray-800 relative p-1">
      <div class="flex justify-center text-emerald-400 bg-gray-800 p-2 sticky top-0 z-10">
        <span id="online-count" class="pr-1">3</span>online
      </div>
      <div id="chat_container" class="overflow-y-auto grow">
        <ul id="chat_messages" class="flex flex-col justify-end gap-2 p-4">
          {% for message in channel_messages %}
            {% if message.author == user %}
              <li class="flex justify-end mb-4">
                <div class="bg-green-200 rounded-l-lg rounded-tr-lg p-4 max-w-[75%]">
                  <span>{{ message.message }}</span>
                </div>
                <div class="flex items-end">
                  <svg height="13" width="8">
                    <path fill="#bbf7d0" d="M6.3,10.4C1.5,8.7,0.9,5.5,0,0.2L0,13l5.2,0C7,13,9.6,11.5,6.3,10.4z" />
                  </svg>
                </div>
              </li>
            {% else %}
              <li>
                <div class="flex justify-start">
                  <div class="flex items-end mr-2">c
                    <a href="">
                      <img class="w-8 h-8 rounded-full object-cover"
                           src="https://pbs.twimg.com/profile_images/508601156767997952/fFTdKUf2_400x400.jpeg">
                    </a>
                  </div>
                  <div class="flex items-end">
                    <svg height="13" width="8">
                      <path fill="white" d="M2.8,13L8,13L8,0.2C7.1,5.5,6.5,8.7,1.7,10.4C-1.6,11.5,1,13,2.8,13z"></path>
                    </svg>
                  </div>
                  <div class="bg-white p-4 max-w-[75%] rounded-r-lg rounded-tl-lg">
                    <span>{{ message.message }}</span>
                  </div>
                </div>
                <div class="text-sm font-light py-1 ml-10">
                  <span class="text-white">{{ message.author }}</span>
                  <span class="text-gray-400">@{{ message.author | lower }}</span>
                </div>
              </li>
            {% endif %}
          {% endfor %}
        </ul>
      </div>
      <div class="sticky bottom-0 z-10 p-2 bg-gray-800">
        <div class="flex items-center rounded-xl px-2 py-2">
          <form id="chat_message_form" method="post" class="w-full">
            <input type="text"
                   name="message"
                   placeholder="Add message ..."
                   maxlength="150"
                   class="w-full bg-gray-700 text-white rounded-lg px-3 py-2 outline-none placeholder-gray-400">
          </form>
        </div>
      </div>
    </div>
  </div>
  </wrapper>
{% endblock content %}
